# 📘 テーブル定義書 - Memoアプリ

## 1. memos テーブル（メモ情報）

| 項目 | 内容 |
|------|------|
| **テーブル名** | `memos` |
| **概要** | ユーザーが作成したメモ情報を管理するテーブル |
| **用途** | メモの作成・取得・更新・削除機能で使用 |

### 🗃️ カラム定義

| カラム名 | 型 | PK | NN | FK | デフォルト | 説明 |
|----------|----|----|----|----|------------|------|
| `id` | INTEGER | ✅ | ✅ |  | AUTOINCREMENT | メモID（主キー） |
| `title` | TEXT |  |  |  |  | メモのタイトル |
| `content` | TEXT |  |  |  |  | メモ本文 |
| `created_at` | TEXT (ISO8601) |  | ✅ |  | CURRENT_TIMESTAMP | 作成日時 |
| `updated_at` | TEXT (ISO8601) |  | ✅ |  | CURRENT_TIMESTAMP | 更新日時 |
| `is_archived` | INTEGER (0/1) |  | ✅ |  | 0 | アーカイブフラグ（0:通常, 1:アーカイブ） |

> ✅ NN = NOT NULL / PK = Primary Key / FK = Foreign Key

### 🔗 インデックス・制約

| 名称 | 種別 | 対象カラム | 説明 |
|------|------|--------------|------|
| `PK_memos` | PRIMARY KEY | `id` | 主キー |
| `IDX_memos_created_at` | INDEX | `created_at` | 作成日時でのソート用インデックス |

### 📊 サンプルレコード

| id | title | content | created_at | updated_at | is_archived |
|----|-------|---------|-------------|-------------|--------------|
| 1 | 買い物リスト | 牛乳・卵・パン | 2025-10-07T14:22:00 | 2025-10-07T14:22:00 | 0 |
| 2 | 会議メモ | プロジェクト進捗まとめ | 2025-10-07T15:00:00 | 2025-10-07T15:05:00 | 0 |

---

## 2. tags テーブル（タグ情報）

| 項目 | 内容 |
|------|------|
| **テーブル名** | `tags` |
| **概要** | メモに紐づくタグ情報を管理するテーブル |
| **用途** | タグ検索・分類機能で使用 |

### 🗃️ カラム定義

| カラム名 | 型 | PK | NN | FK | デフォルト | 説明 |
|----------|----|----|----|----|------------|------|
| `id` | INTEGER | ✅ | ✅ |  | AUTOINCREMENT | タグID（主キー） |
| `name` | TEXT |  | ✅ |  |  | タグ名 |

### 🔗 インデックス・制約

| 名称 | 種別 | 対象カラム | 説明 |
|------|------|--------------|------|
| `PK_tags` | PRIMARY KEY | `id` | 主キー |

---

## 3. memo_tags テーブル（メモ-タグ中間）

| 項目 | 内容 |
|------|------|
| **テーブル名** | `memo_tags` |
| **概要** | メモとタグの多対多関係を管理する中間テーブル |
| **用途** | メモのタグ付け、タグ別検索に使用 |

### 🗃️ カラム定義

| カラム名 | 型 | PK | NN | FK | デフォルト | 説明 |
|----------|----|----|----|----|------------|------|
| `memo_id` | INTEGER | ✅ | ✅ | ✅ |  | メモID（`memos.id`） |
| `tag_id` | INTEGER | ✅ | ✅ | ✅ |  | タグID（`tags.id`） |

### 🔗 インデックス・制約

| 名称 | 種別 | 対象カラム | 説明 |
|------|------|--------------|------|
| `PK_memo_tags` | PRIMARY KEY | `memo_id, tag_id` | 複合主キー |
| `FK_memo_tags_memo` | FOREIGN KEY | `memo_id` | memos.id を参照 |
| `FK_memo_tags_tag` | FOREIGN KEY | `tag_id` | tags.id を参照 |

---

## 📚 備考

- すべての日時カラムは ISO8601 形式（例：`2025-10-07T14:22:00`）で保存する。
- `is_archived` は論理削除用のフラグとして使用し、物理削除は原則行わない。
- タグ機能は任意だが、今後の機能拡張（検索・分類・フィルタリング）を考慮して定義。

---
